<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netzyn Webplayer Launcher</title>
</head>

<body>
    <p style="font-size:30px;">App with no toolbar</p>
    <a id="candy_page" target="_blank"><img src="https://www.cityam.com/wp-content/uploads/2023/09/CCS-Candies-Key-Art-4-3-Logo-e1695898049123.jpg" class="post-img" width="128" height="128"></a>
    <br>
    <br>
    <p style="font-size:30px;">App with timer (swipe-to-play)</p>
    <a id="candy_timer" target="_blank"><img src="https://www.cityam.com/wp-content/uploads/2023/09/CCS-Candies-Key-Art-4-3-Logo-e1695898049123.jpg" class="post-img" width="128" height="128"></a>

    <script>
        // ============================================================================
        // LAUNCHER - Constructs URLs for timer.html with all required parameters
        // All parameters must be passed through - no fallbacks in timer.html
        // ============================================================================

        // Read parameters from URL
        const app = new URLSearchParams(window.location.search).get("app");
        const appColor = new URLSearchParams(window.location.search).get("color");
        const appText = new URLSearchParams(window.location.search).get("text");
        const appIcon = new URLSearchParams(window.location.search).get("icon");
        const install = new URLSearchParams(window.location.search).get("install");
        const install_ios = new URLSearchParams(window.location.search).get("install_ios");
        const orient = new URLSearchParams(window.location.search).get("orient");

        // Validate required parameters
        if (!app) {
            alert("Error: 'app' parameter is required!");
        }
        if (!appColor) {
            alert("Warning: 'color' parameter is missing!");
        }
        if (!appText) {
            alert("Warning: 'text' parameter is missing!");
        }
        if (!appIcon) {
            alert("Warning: 'icon' parameter is missing!");
        }
        if (!install) {
            alert("Warning: 'install' parameter is missing!");
        }
        if (!install_ios) {
            alert("Warning: 'install_ios' parameter is missing!");
        }

        // Determine orientation if not provided
        const orientation = orient || (app && app.includes("_L") ? "L" : "P");

        // ============================================================================
        // SET URLS FOR LAUNCHER BUTTONS
        // ============================================================================
        function setUrls() {
            console.log("Setting URLs for app:", app);

            // Link for page without toolbar
            var urlPage = document.getElementById("candy_page");
            if (urlPage && app) {
                var pageHref = '../page/page.html?app=' + encodeURIComponent(app) + 
                    '&orient=' + orientation;
                urlPage.setAttribute("href", pageHref);
            }

            // Link for timer (swipe-to-play with toolbar)
            var urlTimer = document.getElementById("candy_timer");
            if (urlTimer && app) {
                var timerHref = '../timer/timer.html?app=' + encodeURIComponent(app) +
                    '&orient=' + orientation +
                    '&icon=' + encodeURIComponent(appIcon || '') +
                    '&color=' + encodeURIComponent(appColor || '') +
                    '&text=' + encodeURIComponent(appText || '') +
                    '&install=' + encodeURIComponent(install || '') +
                    '&install_ios=' + encodeURIComponent(install_ios || '');
                urlTimer.setAttribute("href", timerHref);
                
                console.log("Timer URL:", timerHref);
            }
        }

        setUrls();
    </script>
</body>

</html>